<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Raffle</title>
  </head>
  <body>
    <button onclick="assignNumbers()">分配號碼</button>
    <button onclick="drawNumber()">抽獎</button>
    <p id="output"></p>

    <!-- 請確保這行是在 body 最底部 -->
    <script src="index.js"></script>
    
    <script>
      // 等待 Emscripten 的 Module 加載完成後再呼叫 C 函式
      var Module = {
        onRuntimeInitialized: function () {
          // 使用 cwrap 將 C 函式轉成 JS 可呼叫的形式
          window.assign_numbers = Module.cwrap("assign_numbers", null, []);
          window.draw_number = Module.cwrap("draw_number", "number", []);
          
          // 當按鈕點擊時使用這些函式
          window.assignNumbers = function () {
            assign_numbers();
            document.getElementById("output").innerText = "號碼已分配！";
          }

          window.drawNumber = function () {
            var number = draw_number();
            document.getElementById("output").innerText = "抽中的號碼是：" + number;
          }
        }
      };
    </script>
  </body>
</html>
