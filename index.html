<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ğŸ¯ æŠ½çå°ç¨‹å¼</title>
<style>
body {
font-family: Arial, sans-serif;
text-align: center;
color: #003366; /* æ·±è—è‰²å­—é«” */
}
#loading {
font-size: 18px;
color: #555; /* ç°è‰² */
}
#playerList {
margin-top: 10px;
text-align: left;
display: inline-block;
}
</style>
</head>
<body>
<h1>ğŸ¯ æŠ½çå°ç¨‹å¼</h1>
<div id="loading">è¼‰å…¥ä¸­... è«‹ç¨å€™</div>

<button id="btnAssign" onclick="assignNumbers()" disabled>åˆ†é…è™Ÿç¢¼</button>
<button id="btnDraw" onclick="drawNumber()" disabled>æŠ½ç</button>
<p id="output"></p>
<div id="playerList"></div>

<!-- å¿…é ˆåœ¨ index.js ä¹‹å‰å®šç¾© Module -->
<script>
var Module = {
onRuntimeInitialized: function () {
// å°æ‡‰ C++ å‡½å¼
window.assign_numbers = Module.cwrap("assign_numbers", null, []);
window.draw_number = Module.cwrap("draw_number", "number", []);
window.get_player_count = Module.cwrap("get_player_count", "number", []);
window.get_player_name = Module.cwrap("get_player_name", "string", ["number"]);
window.get_player_number = Module.cwrap("get_player_number", "number", ["number"]);

// åˆ†é…è™Ÿç¢¼
window.assignNumbers = function () {
assign_numbers();
let count = get_player_count();
let listHtml = "<h3>ç©å®¶åå–®</h3><ul>";
for (let i = 0; i < count; i++) {
let name = get_player_name(i);
let num = get_player_number(i);
listHtml += `<li>${name} â¡ï¸ è™Ÿç¢¼ ${num}</li>`;
}
listHtml += "</ul>";
document.getElementById("playerList").innerHTML = listHtml;
document.getElementById("output").innerText = "è™Ÿç¢¼å·²åˆ†é…ï¼";
};

// æŠ½ç
window.drawNumber = function () {
let number = draw_number();
document.getElementById("output").innerText = "æŠ½ä¸­çš„è™Ÿç¢¼æ˜¯ï¼š" + number;
};

// å•Ÿç”¨æŒ‰éˆ• & ç§»é™¤è¼‰å…¥æç¤º
document.getElementById("btnAssign").disabled = false;
document.getElementById("btnDraw").disabled = false;
document.getElementById("loading").style.display = "none";
}
};
</script>

<!-- ä¸€å®šè¦æ”¾åœ¨ Module å®£å‘Šä¹‹å¾Œ -->
<script src="index.js"></script>
</body>
</html>
